clear;clc 

F=@(p,x)p(1)*exp((x(:,1)-x(:,2)*p(4))/0.026/p(6))+p(2)*exp((x(:,1)-x(:,2)*p(4))/0.026/p(7))+(x(:,1)-x(:,2)*p(4))/p(5)-p(1)-p(2)+p(3)-x(:,2); 

x=[0,4.84827E-9 

0.05,7.20861E-9 

0.1,9.486E-9 

0.15,1.33346E-8 

0.2,1.85467E-8 

0.25,2.54804E-8 

0.3,3.57885E-8 

0.35,4.94846E-8 

0.4,6.86021E-8 

0.45,9.34068E-8 

0.5,1.36416E-7 

0.55,2.18504E-7 

0.6,4.51033E-7 

0.65,1.2785E-6 

0.7,4.57114E-6 

0.75,1.70904E-5 

0.8,5.62476E-5 

0.85,1.45646E-4 

0.9,2.93975E-4 

0.95,4.91251E-4 

1,7.21464E-4 ]; 

p0=[3 5 4 10 9 10 4];%%因为你这个函数很变态，初值选择不好得不到好结果，这个初值不错 

warning off 

p=nlinfit(x,zeros(size(x,1),1),F,p0); 

disp('I1、I2、IL、Rs、Rsh、n1、n2分别为：'); 

disp(num2str(p)); 

plot(x(:,1),x(:,2),'ro');hold on; 

ezplot(@(x,y)F(p,[x,y]),[0,1,-1e-3,1e-3]); 

title('曲线拟合');legend('样本点','拟合曲线')